---
title: "R for transport planning"
subtitle: "Making it more data-driven, modular and open"
author: "Robin Lovelace, University of Leeds"
date: "2019-07-10, [UseR 2019](http://user2019.r-project.org)"
output:
  xaringan::moon_reader:
    chakra: libs/remark-latest.min.js
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
# bibliography: /home/robin/allrefs.bib
---


# Abstract

Since the first release of R on CRAN, in 1997, its use in many fields has grown rapidly. Lai et al. (2019), for example, suggest that more than 50% of research articles published in Ecology use R in some way. Much like many ecological datasets, transport data tend to be large, diverse and have spatial and temporal attributes. Unlike Ecology, Transport Planning has been a slow adopter of R, with a much lower percentage of papers using the language. This raises the question: why? After exploring this question, in relation to dominant transport planning software products, the talk will sketch of what an open source transport planning 'ecosystem' could look like. Based on my own experience, of developing the stplanr package and teaching practitioners, the talk will discuss the importance of building â€˜communities of practice', for transport planners making the switch to R. These observations relate to others promoting R in new environments, and link to the wider question of how to advocate for open source software in wider society.

<!-- Context: in this session: http://user2019.r-project.org/talk_schedule/ -->
<!-- 14:00 		Movement & transport 	Rocio Joo -->
<!-- 	Navigating through the R packages for movement 	Angela Li 	Ariane 1+2 	 -->
<!-- 14:18 		Movement & transport 	Mohammad Mehdi Moradi -->
<!-- 	Classes, methods and data analysis for trajectories 	Angela Li 	Ariane 1+2 	 -->
<!-- 14:36 		Movement & transport 	Christine Thomas-Agnan -->
<!-- 	Modelling spatial flows with R 	Angela Li 	Ariane 1+2 	 -->
<!-- 14:54 		Movement & transport 	Robin Lovelace -->
<!-- 	R for Transport Planning 	Angela Li 	Ariane 1+2 -->

---

background-image: url(https://raw.githubusercontent.com/npct/pct-team/master/figures/sdna-san-fran.png)
background-size: cover
class: center, middle

---

background-image: url(car-free-leeds.png)
background-size: cover
class: center, top

--

# A dream

Source: [leedscyclingcampaign.co.uk](www.leedscyclingcampaign.co.uk/CarFreeSundays)

<!-- Add image from car free day in Leeds -->

---

# Why transport?

- Fast growing source of energy use and pollution 
- No 'upper limit' on use
- Inequalities

--

- Number 1 cause of death and injury among young people wide


---

# Why transport planning with R?

---



# Current transport software

--

(Source: Crispin Cooper, author of sDNA)

---

.pull-left[

### The four stage model

```{r, echo=FALSE}
knitr::include_graphics("fourstage.png")
```

Still dominates transport planning models (Boyce and Williams 2015)
]


--


### Impacting the durrent software landscape

- Dominated by a few proprietary products

- Limited support community online 

- High degree of lock-in

- Limited cross-department collaboration

---

# Existing products

```{r, echo=FALSE, message=FALSE, warning=FALSE}
tms = readr::read_csv("transport-software.csv")[1:5]
# tms = dplyr::arrange(tms, dplyr::desc(Citations))
knitr::kable(tms, booktabs = TRUE, caption = "Sample of transport modelling software in use by practitioners. Note: citation counts based on searches for company/developer name, the product name and 'transport'. Data source: Google Scholar searches, October 2018.", format = "html")
```

---

# User support

Getting help is vital for leaning/improving software

--

![](https://media.giphy.com/media/6HtgBlXu1TIac/giphy.gif)

--

"10-Hour Service Pack $2,000" (source: [caliper.com/tcprice.htm](https://www.caliper.com/tcprice.htm))

---

# Online communities

- [gis.stackexchange.com](https://gis.stackexchange.com/questions) has 21,314 questions 

- [r-sig-geo](http://r-sig-geo.2731867.n2.nabble.com/) has 1000s of posts

- RStudio's Discourse community has 65,000+ posts already!

--

- No transport equivalent (e.g. earthscience.stackexchange.com is in beta)

- Potential for a Discourse forum or similar: transport is not (just) GIS

---

# Best way to get support is peer-to-peer:

![](rstudio-community.png)

Source: https://community.rstudio.com/about

---

# A few prices

```{r, echo=FALSE}
knitr::include_graphics("price-transcad.png")
```

Source: [google.com/search?q=transcad+price](https://www.google.com/search?q=transcad+price)

---

background-image: url(https://media.giphy.com/media/YlQQYUIEAZ76o/giphy.gif)
background-size: cover
class: center, middle


# Future transport software

---

# Is already here I

- Example: the Propensity to Cycle Tool ([PCT.bike](http://www.pct.bike/)) (Lovelace et al. 2017)

```{r, echo=FALSE}
knitr::include_graphics("https://raw.githubusercontent.com/npct/pct-team/master/figures/early.png")
```

---

# Is already here II

- Example: the Cycling Infrastructure Prioritisation Toolkit ([CyIPT.bike](https://www.cyipt.bike))

```{r, echo=FALSE}
knitr::include_graphics("https://www.cyipt.bike/images/existing-edit.png")
```

---

# Is already here III

- Example: StreetMix ([streetmix.net](https://streetmix.net/))

```{r, echo=FALSE, out.width="60%"}
knitr::include_graphics("http://1p40p3gwj70rhpc423s8rzjaz-wpengine.netdna-ssl.com/wp-content/uploads/2016/03/2016_0211_2ndAvePioneerSquareFlyer-streetmix.jpg")
```

---

# Sumo vs netlogo

```{r, echo=FALSE, out.width="70%"}
knitr::include_graphics("https://user-images.githubusercontent.com/1825120/46748345-41c98580-ccab-11e8-8093-b265bd36f639.gif")
```

Source: [github.com/eclipse/sumo](https://github.com/eclipse/sumo/issues/2409)

.pull-left[

```{r, echo=FALSE, out.width="20%"}
knitr::include_graphics("https://raw.githubusercontent.com/nldoc/nlrx/master/man/figures/logo.png")
```

]

Source: [github.com/nldoc/nlrx](https://github.com/nldoc/nlrx)

---

### Gamification

```{r, echo=FALSE}
knitr::include_graphics("citybound.png")
```

- Completely open source, written in [rust](https://github.com/citybound/citybound)
- Source: video at https://aeplay.org/citybound

---


background-image: url(https://media.giphy.com/media/OMeGDxdAsMPzW/giphy.gif)
background-size: cover
class: center, middle, inverse

# Code example / questions

---

# Thanks for listening!

--

A few links and references

- Boyce, D.E., Williams, H.C.W.L., 2015. Forecasting Urban Travel: Past, Present and Future. Edward Elgar Publishing.

- The Propensity to Cycle Tool: http://www.pct.bike/ - Lovelace, R., Goodman, A., Aldred, R., Berkoff, N., Abbas, A., Woodcock, J., 2017. The Propensity to Cycle Tool: An open source online system for sustainable transport planning. Journal of Transport and Land Use 10. https://doi.org/10.5198/jtlu.2016.862

- Open source 'geocompr' book: Lovelace, R., Nowosad, J., Meunchow, J., 2019. Geocomputation with R. CRC Press.


- The Cycling Infrastructure Prioritisation Toolkit: https://www.cyipt.bike/

- Pebesma, E., 2018. Simple Features for R: Standardized Support for Spatial Vector Data. The R Journal.

